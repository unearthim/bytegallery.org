<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Shrinking Pillar | Digital Archaeology</title>

    <!-- 1. Dependencies -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- 2. Fonts & Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;800&family=Lora:wght@400;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">

    <!-- 3. Styles -->
    <style>
        body {
            background-color: #fcfaf5; /* unearth-bg */
            color: #1a1a1a; /* unearth-main */
            font-family: 'ui', 'Inter', sans-serif;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Typography */
        .font-narrative { font-family: 'Lora', serif; }
        .font-ui { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'Space Mono', monospace; }

        /* --- HISTORICAL ARTIFACT STYLES (PRESERVED/ADAPTED) --- */

        /* ERA 1: The Architecture (Windows 95) */
        .scrollbar-95 {
            background: #dfdfdf;
            border-left: 1px solid #fff;
            border-top: 1px solid #fff;
            border-right: 1px solid #404040;
            border-bottom: 1px solid #404040;
            box-shadow: inset 1px 1px 0 #c0c0c0;
            position: relative;
        }
        .thumb-95 {
            background: #c0c0c0;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #404040;
            border-bottom: 1px solid #404040;
            box-shadow: inset -1px -1px 0 #808080;
        }
        .arrow-btn-95 {
            background: #c0c0c0;
            border-top: 1px solid #fff;
            border-left: 1px solid #fff;
            border-right: 1px solid #404040;
            border-bottom: 1px solid #404040;
            display: flex; align-items: center; justify-content: center;
        }
        .arrow-btn-95:active {
            border-top: 1px solid #404040; border-left: 1px solid #404040;
            border-right: 1px solid #fff; border-bottom: 1px solid #fff;
            transform: translate(1px, 1px);
        }
        .pattern-95 {
            background-image: radial-gradient(#000 15%, transparent 16%);
            background-size: 4px 4px;
            opacity: 0.1;
        }

        /* ERA 2: The Aqua (Mac OS X) */
        .track-aqua {
            background: #f0f0f0;
            border-left: 1px solid #d9d9d9;
        }
        .thumb-aqua {
            background: linear-gradient(to right, #6ba7ef 0%, #2765c7 50%, #70aaf0 100%);
            border-radius: 10px;
            border: 1px solid #1d4d96;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.4);
        }
        .thumb-aqua::after {
            content: ''; position: absolute;
            left: 30%; top: 20%; right: 30%; bottom: 20%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.3) 0%, transparent 100%);
            border-radius: 10px;
        }

        /* ERA 3: The Ghost (Modern Mobile) - Adapted for light theme */
        .thumb-ghost {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
            transition: background 0.2s, width 0.2s;
        }
        .thumb-ghost:hover { background: rgba(0, 0, 0, 0.4); }

        /* Custom Tailwind Config */
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                'unearth-bg': '#fcfaf5',
                'unearth-surface': '#ffffff',
                'unearth-main': '#1a1a1a',
                'unearth-secondary': '#6b7280',
                'unearth-primary': '#BF5700',
                'unearth-border': '#e5e7eb',
              },
              fontFamily: {
                'narrative': ['Lora', 'serif'],
                'ui': ['Inter', 'sans-serif'],
                'mono': ['Space Mono', 'monospace'],
              }
            }
          }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CustomScrollbar = ({ era, children }) => {
            const contentRef = useRef(null);
            const [scrollPos, setScrollPos] = useState(0);
            const [isDragging, setIsDragging] = useState(false);
            const [startY, setStartY] = useState(0);
            const [startScrollTop, setStartScrollTop] = useState(0);
            const [hovered, setHovered] = useState(false);

            const handleScroll = () => {
                if (contentRef.current) {
                    const { scrollTop, scrollHeight, clientHeight } = contentRef.current;
                    const scrollRatio = scrollTop / (scrollHeight - clientHeight);
                    setScrollPos(scrollRatio);
                }
            };

            const scrollBy = (amount) => {
                if (contentRef.current) {
                    contentRef.current.scrollBy({ top: amount, behavior: 'smooth' });
                }
            };

            const handleMouseDown = (e) => {
                setIsDragging(true);
                setStartY(e.clientY);
                if (contentRef.current) {
                    setStartScrollTop(contentRef.current.scrollTop);
                }
            };

            useEffect(() => {
                const handleMouseMove = (e) => {
                    if (!isDragging || !contentRef.current) return;
                    const { scrollHeight, clientHeight } = contentRef.current;
                    const trackHeight = clientHeight - (era === '95' ? 32 : 0);
                    const deltaY = e.clientY - startY;
                    const scrollAmount = (deltaY / trackHeight) * (scrollHeight - clientHeight);
                    contentRef.current.scrollTop = startScrollTop + scrollAmount;
                };
                const handleMouseUp = () => setIsDragging(false);

                if (isDragging) {
                    window.addEventListener('mousemove', handleMouseMove);
                    window.addEventListener('mouseup', handleMouseUp);
                }
                return () => {
                    window.removeEventListener('mousemove', handleMouseMove);
                    window.removeEventListener('mouseup', handleMouseUp);
                };
            }, [isDragging, startY, startScrollTop, era]);

            const renderScrollbar = () => {
                if (era === '95') {
                    return (
                        <div className="w-4 h-full bg-[#dfdfdf] flex flex-col border-l border-black select-none">
                            <button className="h-4 w-full arrow-btn-95" onClick={() => scrollBy(-50)}>
                                <i className="fa-solid fa-caret-up text-black"></i>
                            </button>
                            <div className="flex-1 relative pattern-95">
                                <div className="absolute w-full thumb-95 cursor-default" style={{ height: '20%', top: `${scrollPos * 80}%` }} onMouseDown={handleMouseDown}></div>
                            </div>
                            <button className="h-4 w-full arrow-btn-95" onClick={() => scrollBy(50)}>
                                <i className="fa-solid fa-caret-down text-black"></i>
                            </button>
                        </div>
                    );
                }
                if (era === 'aqua') {
                    return (
                        <div className="w-4 h-full track-aqua relative select-none">
                             <div className="absolute w-[80%] left-[10%] thumb-aqua cursor-default shadow-lg" style={{ height: '20%', top: `${scrollPos * 80}%` }} onMouseDown={handleMouseDown}></div>
                        </div>
                    );
                }
                if (era === 'ghost') {
                    return (
                        <div className="absolute right-1 top-1 bottom-1 w-1.5 rounded-full transition-opacity duration-500 select-none" style={{ opacity: hovered || isDragging ? 1 : 0 }}>
                             <div className="w-full thumb-ghost cursor-default" style={{ height: '20%', marginTop: `${scrollPos * (contentRef.current?.clientHeight * 0.8)}px` }} onMouseDown={handleMouseDown}></div>
                        </div>
                    );
                }
                if (era === 'future') {
                    return (
                        <div className="w-[2px] h-full bg-unearth-border relative">
                            <div className="absolute top-0 left-0 w-full bg-unearth-primary shadow-[0_0_10px_#BF5700]" style={{ height: `${scrollPos * 100}%` }}></div>
                        </div>
                    );
                }
            };

            return (
                <div className={`relative flex h-64 md:h-80 border border-unearth-border bg-unearth-surface overflow-hidden rounded-lg shadow-lg ${era === '95' ? 'font-mono text-xs' : ''}`} onMouseEnter={() => setHovered(true)} onMouseLeave={() => setHovered(false)}>
                    <div ref={contentRef} className="flex-1 p-6 overflow-y-auto" onScroll={handleScroll} style={{ scrollbarWidth: 'none', msOverflowStyle: 'none' }}>
                        {children}
                    </div>
                    {renderScrollbar()}
                </div>
            );
        };

        const LoremIpsum = () => (
            <div className="space-y-4 text-unearth-secondary text-sm leading-relaxed select-none font-narrative">
                <p>In the beginning, the viewport was small, and the data was vast. We needed a map. We needed a way to know where we were in the document.</p>
                <p>The scrollbar was born not just as a control, but as an indicator. It told us two things: "You can move," and "This is how much is left."</p>
                <p>In the 90s, it was a pillar. It took up 16 pixels of valuable screen real estate. It was proud. It had buttons for precision clicking.</p>
                <p>Then, we decided space was too precious. We rounded it. We made it look like water. Then we made it float.</p>
                <p>Now, it is a ghost. It only appears when we invoke it. We have memorized the gesture. The visual cue is gone.</p>
                <p>We scroll blindly now, trusting the infinite feed. The bottom of the page is no longer a destination; it is a myth.</p>
                <p>Keep scrolling. There is always more content. The pillar has crumbled, but the depth has become infinite.</p>
                <p>End of file.</p>
            </div>
        );

        const EraSelector = ({ currentEra, eras, setEra }) => {
            return (
                <div className="flex flex-col gap-4 relative z-10">
                    {eras.map((era, index) => (
                        <button key={era.id} onClick={() => setEra(index)} className={`group flex items-center gap-4 text-left transition-all duration-300 ${currentEra === index ? 'opacity-100 translate-x-2' : 'opacity-60 hover:opacity-100'}`}>
                            <div className={`w-12 h-12 flex items-center justify-center rounded-full border transition-all duration-300 font-mono text-xs ${currentEra === index ? 'border-unearth-primary bg-unearth-primary/10 text-unearth-primary scale-110' : 'border-unearth-border text-unearth-secondary group-hover:border-unearth-primary/30'}`}>
                                {era.width}
                            </div>
                            <div>
                                <div className={`font-bold text-sm ${currentEra === index ? 'text-unearth-main' : 'text-unearth-secondary'}`}>{era.title}</div>
                                <div className="text-[10px] text-unearth-secondary/80 uppercase tracking-wider">{era.subtitle}</div>
                            </div>
                        </button>
                    ))}
                </div>
            );
        };

        function App() {
            const [currentEraIndex, setCurrentEraIndex] = useState(0);
            const eras = [
                { id: '95', width: '16px', title: 'The Pillar', subtitle: 'Windows 95 / Classic', description: "A structural element. It occupied a permanent 16-20px column. It had 3D bevels to indicate depth and affordance. It felt like a mechanical slider on a mixing board. You clicked the arrows for precision. It was reliable.", type: '95' },
                { id: 'aqua', width: '15px', title: 'The Gel', subtitle: 'Mac OS X Aqua', description: "Steve Jobs wanted interfaces to be 'lickable.' The scrollbar became a blue gelatinous capsule inside a track. The arrows were moved together. It was beautiful, but it still demanded space.", type: 'aqua' },
                { id: 'ghost', width: '0px', title: 'The Ghost', subtitle: 'Mobile & Modern OS', description: "The iPhone changed everything. With touch, we scrolled the content itself. The scrollbar became an overlayâ€”a thin line that only appeared during motion to show position, then vanished. The 'track' was gone.", type: 'ghost' },
                { id: 'future', width: '1px', title: 'The Thread', subtitle: 'Reading Progress', description: "In long-form reading, the scrollbar has morphed into a 'Mini-Map' or a progress thread. It is no longer a control; it is purely data visualization. We control the motion; it just records the history.", type: 'future' }
            ];

            return (
                <div className="font-ui">
                    <header className="pt-16 pb-12 px-8 md:px-20 z-20 relative border-b border-unearth-border">
                        <div className="flex items-center gap-4 mb-4 text-unearth-primary">
                             <a href="../" className="hover:text-unearth-main transition-colors cursor-pointer flex items-center gap-2">
                                <i className="fa-solid fa-arrow-left"></i> Gallery Index
                             </a>
                             <span className="text-unearth-secondary">/</span>
                             <span className="text-unearth-secondary">ART-006</span>
                        </div>
                        <div className="border-l-2 border-unearth-primary pl-6">
                            <h1 className="text-5xl md:text-7xl font-black mb-4 tracking-tighter text-unearth-main">
                                THE SHRINKING <br/>
                                <span className="text-unearth-primary">PILLAR</span>
                            </h1>
                            <p className="font-narrative text-unearth-secondary max-w-xl text-lg">
                                The vanishing act of navigation.
                            </p>
                        </div>
                    </header>

                    <main className="max-w-7xl mx-auto z-20 relative px-8 py-12 grid grid-cols-1 lg:grid-cols-12 gap-12">
                        <div className="lg:col-span-4 space-y-12">
                            <div className="text-xs font-mono text-unearth-secondary uppercase tracking-widest mb-8 border-b border-unearth-border pb-2">
                                Width Reduction
                            </div>
                            <EraSelector currentEra={currentEraIndex} eras={eras} setEra={setCurrentEraIndex} />
                            <div className="p-6 bg-unearth-surface border border-unearth-border rounded-lg mt-8">
                                <div className="text-xs text-unearth-primary font-mono mb-2 flex items-center gap-2">
                                    <i className="fa-solid fa-grip-vertical"></i> ARTIFACT SPECS
                                </div>
                                <p className="text-sm text-unearth-secondary leading-relaxed font-narrative">
                                    {eras[currentEraIndex].description}
                                </p>
                            </div>
                        </div>
                        <div className="lg:col-span-8 relative min-h-[500px] flex items-center justify-center">
                            <div className="w-full max-w-md">
                                <div className="text-center mb-4 font-mono text-xs text-unearth-secondary/70">
                                    TRY SCROLLING THE CONTENT BELOW
                                </div>
                                <CustomScrollbar era={eras[currentEraIndex].type}>
                                    <LoremIpsum />
                                </CustomScrollbar>
                            </div>
                        </div>
                    </main>

                    <footer className="mt-20 py-12 text-center border-t border-unearth-border text-unearth-secondary font-mono text-sm relative z-20">
                        <p className="font-narrative">Curated by Jojo | Digital Archaeologist</p>
                        <p className="mt-2 font-narrative">
                            <small>
                                a <b><a href="https://sentientification.com" target="_blank" rel="noopener noreferrer" className="hover:text-unearth-primary underline">liminal mind meld</a></b> collaboration: digital monument by <b><a href="https://unearth.im" target="_blank" rel="noopener noreferrer" className="hover:text-unearth-primary underline">unearth.im</a></b> | <b><a href="https://archaeobytology.org" target="_blank" rel="noopener noreferrer" className="hover:text-unearth-primary underline">archive & anvil</a></b>
                            </small>
                        </p>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
